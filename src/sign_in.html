<!DOCTYPE html>
<html lang="cmn-Hans">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>登录</title>
    <link rel="stylesheet" href="./css/sign_in.css">
    <script src="//at.alicdn.com/t/font_997722_6yitf6ari65.js"></script>
    <script>
        var pageWidth = window.innerWidth;
        document.write('<style>html{font-size:'+pageWidth+'px;}</style>')
    </script>
  </head>
  <body>
    <div class="logo-wrapper">
        <svg class="icon logo" aria-hidden="true">
            <use xlink:href="#icon-wangyiyunyinle"></use>
        </svg>
        <span>网易云音乐</span>
        
    </div>
    <div class="dign-type">(Spotify风格)</div>
    <form class="signIn">
      <h2>登录</h2>
      <label>用户邮箱<input type="text" name="email"/></label>
      <label>密码<input type="password" name="password"/></label>
      <input type="submit" value="提交" />
    </form>
    <a href="./sign_up.html">注册</a>
    <a href="./index.html">游客试用</a>
  </body>
  <script src="../vendor/jquery.min.js"></script>
  <script src="../vendor/av-min.js"></script>
  <script src="./js/av-init.js"></script>
  <script>
    $('.signIn').on('submit',(e)=>{
      e.preventDefault()
      let hash = []
      let need = ["email","password"]
      need.forEach((key)=>{
        value = $('.signIn').find(`[name=${key}]`).val()
        hash[key] = value
      })
      AV.User.logIn(hash["email"], hash["password"])
      .then(
        ()=>{window.location.href = "./index";},
        (error)=>{alert(JSON.stringify(error))}
      )
    })
  </script>
</html>
